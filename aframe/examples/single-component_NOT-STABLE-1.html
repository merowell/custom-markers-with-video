<!DOCTYPE html>
<!-- 
  Experience created by Melody Rowell, CEV Multimedia: https://github.com/merowell
  Based on the AR.js library and examples created by Jerome Etienne: https://github.com/jeromeetienne/AR.js/
-->

<!--CORS issue, must be solved in API. Fix when time to host. "Access-Control-Allow-Origin: *" to develop local host, use XAMPP?-->

<!-- to bypass CORS:  Win + R, followed by chrome.exe --user-data-dir="C:/Chrome dev session" --disable-web-security -->

<!-- A-FRAME -->
<script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script> <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.0/aframe/build/aframe-ar.js"></script> 
<script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.1.2/dist/aframe-extras.min.js"></script> 
<script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script> 

 <!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 

<!-- Latest compiled and minified CSS -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<!-- vidhandler component -->
<script>
AFRAME.registerComponent('vidhandler', {
    schema: {
      target: {type: 'string'}
    },
    init: function() {
        this.videoNodes = document.querySelectorAll(this.data.target)
    },
    tick: function() {
        if (this.el.object3D.visible == true) {
            if (!this.toggle) {
                this.toggle = true;
                for (let i = 0; i < this.videoNodes.length; i++) {
                    this.videoNodes[i].play();
                } 
            }
        } else {
            if (this.toggle) {
              for (let i = 0; i < this.videoNodes.length; i++) {
                this.videoNodes[i].pause();
              }
              this.toggle = false;
            }
        }
    }
});
</script>




<a-scene embedded arjs>




	<!-- assets for vidhandler -->
    <a-assets >
        <video crossOrigin="Anonymous" Id="vid" loop="true"src="assets\textures\alpha.webm">
           </video>
          <!-- FOR NOTMAL VIDEO YOU CAN USE MP4 or WEBM BUT FOR ALPHA VIDEO YOU NEED TO USE .WEBM FORMAT-->
        

         <video crossOrigin="Anonymous" Id="videonew" loop="true" src="assets\textures\VideoNew.mp4">
           </video>
          <!-- FOR NOTMAL VIDEO YOU CAN USE MP4 or WEBM BUT FOR ALPHA VIDEO YOU NEED TO USE .WEBM FORMAT-->
        
    </a-assets>





	
    <!-- add markers, each marker needs a unique vidhandler component -->

   


<!-- marker1: kanji -->
    <a-marker preset='kanji' vidhandler="target: #vid, #videonew">
         <!-- add transparent video (.webm) -->
        <a-plane  position='0 .3 0' width='3' height='2' rotation="-90 0 0" material='transparent:true;alphaTest:0;src:#vid'></a-plane>

        <!-- add non transparent video (.mp4) -->
        <a-plane  position='0 .2 0' width='1.5' height='1.5' rotation="-90 0 0" material='src:#videonew'></a-plane>
   
        <!-- add .obj model-->
        <a-entity 
                obj-model= 'obj: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/hollywood-star/hollywood-star.obj); 
        mtl: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/hollywood-star/hollywood-star.mtl)' scale="0.3 0.3 0.3" position='0.0 .4 0' rotation='0 0 180'>
        </a-entity>
        <a-entity 
                obj-model= 'obj: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/circle/circle.obj); 
        mtl: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/circle/circle.mtl)' scale="0.1 0.1 0.1" position='0.0 .4 0'>
        </a-entity>

        <!-- *square model*
        <a-entity 
                obj-model= 'obj: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/square/square.obj); 
        mtl: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/square/square.mtl)' scale="0.3 0.3 0.3" position='0.0 0 0' rotation='0 0 0'>
        </a-entity>
        -->
    </a-marker>




    <!-- marker2: hiro -->
    <a-marker preset='hiro' vidhandler="target: #vid, #videonew">
         <!-- add transparent video (.webm) -->
        <a-plane  position='0 .3 0' width='3' height='2' rotation="-90 0 0" material='transparent:true;alphaTest:0;src:#vid'></a-plane>

        <!-- add non transparent video (.mp4) -->
        <a-plane  position='0 .2 0' width='1.5' height='1.5' rotation="-90 0 0" material='src:#videonew'></a-plane>
   
        <!-- add .obj model-->
        <a-entity 
                obj-model= 'obj: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/hollywood-star/hollywood-star.obj); 
        mtl: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/hollywood-star/hollywood-star.mtl)' scale="0.3 0.3 0.3" position='0.0 .4 0' rotation='0 0 180'>
        </a-entity>
        <a-entity 
                obj-model= 'obj: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/circle/circle.obj); 
        mtl: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/circle/circle.mtl)' scale="0.1 0.1 0.1" position='0.0 .4 0'>
        </a-entity>

        <!-- *square model*
        <a-entity 
                obj-model= 'obj: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/square/square.obj); 
        mtl: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/square/square.mtl)' scale="0.3 0.3 0.3" position='0.0 0 0' rotation='0 0 0'>
        </a-entity>
        -->
    </a-marker>





   
    <!-- marker3: hollywood star 1 -->
    <a-marker  vidhandler="target: #vid, #videonew" type='pattern' url='https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/hollywood-stars/patt/pattern-hollywood-star1.patt'>
        <!-- add transparent video (.webm) -->
        <a-plane  position='0 .3 0' width='3' height='2' rotation="-90 0 0" material='transparent:true;alphaTest:0;src:#vid'></a-plane>

        <!-- add non transparent video (.mp4) -->
        <a-plane  position='0 .2 0' width='1.5' height='1.5' rotation="-90 0 0" material='src:#videonew'></a-plane>
   
        <!-- add .obj model-->
        <a-entity 
                obj-model= 'obj: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/hollywood-star/hollywood-star.obj); 
        mtl: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/hollywood-star/hollywood-star.mtl)' scale="0.3 0.3 0.3" position='0.0 .4 0' rotation='0 0 180'>
        </a-entity>
        <a-entity 
                obj-model= 'obj: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/circle/circle.obj); 
        mtl: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/circle/circle.mtl)' scale="0.1 0.1 0.1" position='0.0 .4 0'>
        </a-entity>

        <!-- *square model*
        <a-entity 
                obj-model= 'obj: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/square/square.obj); 
        mtl: url(https://raw.githubusercontent.com/merowell/custom-markers-with-video/master/aframe/examples/assets/3d%20models/square/square.mtl)' scale="0.3 0.3 0.3" position='0.0 0 0' rotation='0 0 0'>
        </a-entity>
        -->
       
    </a-marker>

 







	<!-- add a simple camera -->
		<a-entity camera></a-entity>
</a-scene>

</html>




 


